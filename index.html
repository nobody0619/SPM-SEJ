<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>çºªè€å¸ˆ SPM SEJ Paper 1 è¶…å¼ºè®­ç»ƒå™¨</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
<style>
/* ä¿æŒåŸæ ·å¼ */
:root{--black:#111;--fg:#111;--bg:#fff;--muted:#555;--green:#16a34a;--green-2:#22c55e;--border:#eee;--shadow:0 6px 20px rgba(0,0,0,.06);}
html,body{background:#fff;}body{font-family:Arial,sans-serif;max-width:1100px;margin:auto;text-align:center;color:var(--fg);}
#menu,#quiz,#finish,#results{display:none;} .pill-btn{border:0;background:#111;color:#fff;padding:10px 14px;border-radius:999px;cursor:pointer;}
.wa-fab{position:fixed;right:18px;bottom:18px;background:#25D366;color:#fff;padding:12px 16px;border-radius:999px;text-decoration:none;}
</style>
</head>
<body>
<section class="hero">
<div class="brand">
<div class="brand-icon">SEJ</div>
<div>
<h1 class="brand-title">SPM SEJ Paper 1 è¶…å¼ºè®­ç»ƒå™¨ / <b>SEJ P1 Booster</b></h1>
<p class="brand-sub">æŒ‰ç« èŠ‚ç²¾ç»ƒ Ã— å·å±è¯•å·å®æˆ˜ Ã— é”™é¢˜äºŒæ¬¡å›åˆ· Ã— è‡ªåŠ¨æˆç»©ä¸Šä¼ </p>
</div></div></section>

<div id="welcome">
<h2>è¯·è¾“å…¥å§“åä¸å¯†ç  / Enter Your Name & Password</h2>
<input type="text" id="username" placeholder="å§“å / Name"/>
<input type="password" id="password" placeholder="å¯†ç  / Password"/>
<button id="startBtn" class="pill-btn">ç™»å½• / Log In</button>
<div class="muted" style="margin-top:8px;">å…è´¹è¯•ç”¨å¯†ç ï¼š<b>testing</b>ï¼ˆ5åˆ†é’Ÿï¼‰ï¼›RM10 ä¸€æ¬¡æ€§å¼€é€šï¼Œè§£é”ã€Œæ— é™ç»ƒä¹ ã€ã€‚è´­ä¹°è¯·è”ç³»çºªè€å¸ˆ 016-7312519</div>
</div>

<div id="menu"><h2>è¯·é€‰æ‹©ç« èŠ‚ / Select Chapter</h2></div>
<div id="quiz"><h3 id="quiz-title"></h3><div id="question-area"></div></div>
<div id="finish"><h3 id="finish-msg"></h3><p id="stats"></p><div id="controls"></div></div>
<div id="results"><h2>ğŸ“Š æˆ‘çš„æˆç»©</h2><div id="results-table-wrap"></div></div>

<!-- æˆç»©æäº¤è¡¨å• -->
<iframe name="postFrame" style="display:none;"></iframe>
<form id="postForm" action="https://script.google.com/macros/s/AKfycbxcXEdzviEERt2uqLfgIXLQ3LecB-O8oph_HIiWk8RWq0XjGSd-l9v2ejUf07jq2TA/exec"
method="post" target="postFrame" style="display:none;">
<input name="quizId"/><input name="name"/><input name="score"/><input name="correct"/><input name="wrong"/><input name="time"/>
</form>

<a class="wa-fab" href="https://wa.me/60167312519?text=Hi%20Mr%20Kee%2C%20I%27d%20like%20to%20ask%20about%20SEJ%20P1%20Booster." target="_blank">ğŸ’¬ WhatsApp</a>

<script>
document.addEventListener('DOMContentLoaded',()=>{
const SUBJECT_PREFIX='SEJ';
const SHEET_ID='1bUFFiucc1p_z2eFWq6AEdIvdHVZ8gIn_trDJ8PDT_s8';
const SHEET_GID='0';
const RESULTS_CSV_URL=`https://docs.google.com/spreadsheets/d/${SHEET_ID}/export?format=csv&gid=${SHEET_GID}&cb=${Date.now()}`;
let user='',localResults=[],cloudResults=[];

function loadLocalResults(){try{localResults=JSON.parse(localStorage.getItem('results_'+SUBJECT_PREFIX+'_'+user.toLowerCase())||'[]')}catch{localResults=[]}}
function saveLocal(r){loadLocalResults();localResults.push(r);localStorage.setItem('results_'+SUBJECT_PREFIX+'_'+user.toLowerCase(),JSON.stringify(localResults))}
function fetchCloudResultsFor(name){return new Promise(res=>{
Papa.parse(RESULTS_CSV_URL,{download:true,header:true,skipEmptyLines:true,complete:(r)=>{
const rows=(r.data||[]).map(x=>{const o={};for(const[k,v]of Object.entries(x))o[k.trim().toLowerCase()]=typeof v==='string'?v.trim():v;
const raw=o.quizid||o.quiz_id||'';if(!new RegExp(`^${SUBJECT_PREFIX}\\|`,'i').test(raw))return null;
return{quizId:raw,quizIdPure:raw.replace(/^.*?\|/,'').trim(),name:o.name||'',score:o.score||'',correct:o.correct||'',wrong:o.wrong||'',time:o.time||'',timestamp:o.timestamp||''}}).filter(x=>x&&String(x.name||'').toLowerCase()===name.toLowerCase());
cloudResults=rows;res(rows)},error:()=>{cloudResults=[];res([])}})})
}
function afterLogin(){fetchCloudResultsFor(user).then(()=>alert('ç™»å½•æˆåŠŸï¼Œäº‘ç«¯æˆç»©å·²åŠ è½½ã€‚'))}
document.getElementById('startBtn').onclick=()=>{
user=document.getElementById('username').value.trim();const pw=document.getElementById('password').value;
if(!user||!pw)return alert('è¯·è¾“å…¥å§“åä¸å¯†ç ');afterLogin();}
});
</script>
</body></html>
